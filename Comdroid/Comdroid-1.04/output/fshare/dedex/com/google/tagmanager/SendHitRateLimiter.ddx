.class com/google/tagmanager/SendHitRateLimiter
.super java/lang/Object
.source SendHitRateLimiter.java
.implements com/google/tagmanager/RateLimiter

.field private mLastTrackTime J
.field private final mMaxTokens I
.field private final mMillisecondsPerToken J
.field private final mTokenLock Ljava/lang/Object;
.field private mTokens D

.method public <init>()V
.limit registers 4
; this: v3 (Lcom/google/tagmanager/SendHitRateLimiter;)
.line 37
	const/16	v0,60
; v0 : single-length
	const-wide/16	v1,2000
; v1 : double-length
	invoke-direct	{v3,v0,v1,v2},com/google/tagmanager/SendHitRateLimiter/<init>	; <init>(IJ)V
; v3 : Lcom/google/tagmanager/SendHitRateLimiter; , v0 : single-length , v1 : double-length
.line 38
	return-void	
.end method

.method public <init>(IJ)V
.limit registers 6
; this: v2 (Lcom/google/tagmanager/SendHitRateLimiter;)
; parameter[0] : v3 (I)
; parameter[1] : v4 (J)
.line 26
	invoke-direct	{v2},java/lang/Object/<init>	; <init>()V
; v2 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 18
	new-instance	v0,java/lang/Object
; v0 : Ljava/lang/Object;
	invoke-direct	{v0},java/lang/Object/<init>	; <init>()V
; v0 : Ljava/lang/Object;
	iput-object	v0,v2,com/google/tagmanager/SendHitRateLimiter.mTokenLock Ljava/lang/Object;
; v0 : Ljava/lang/Object; , v2 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 27
	iput	v3,v2,com/google/tagmanager/SendHitRateLimiter.mMaxTokens I
; v3 : single-length , v2 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 28
	iget	v0,v2,com/google/tagmanager/SendHitRateLimiter.mMaxTokens I
; v0 : single-length , v2 : Lcom/google/tagmanager/SendHitRateLimiter;
	int-to-double	v0,v0
; v0 : double-length , v0 : double-length
	iput-wide	v0,v2,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v0 : double-length , v2 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 29
	iput-wide	v4,v2,com/google/tagmanager/SendHitRateLimiter.mMillisecondsPerToken J
; v4 : double-length , v2 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 30
	return-void	
.end method

.method setLastTrackTime(J)V
.annotation buildVisibility Lcom/google/android/gms/common/util/VisibleForTesting;
.end annotation
.limit registers 3
; this: v0 (Lcom/google/tagmanager/SendHitRateLimiter;)
; parameter[0] : v1 (J)
.line 42
	iput-wide	v1,v0,com/google/tagmanager/SendHitRateLimiter.mLastTrackTime J
; v1 : double-length , v0 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 43
	return-void	
.end method

.method setTokensAvailable(J)V
.annotation buildVisibility Lcom/google/android/gms/common/util/VisibleForTesting;
.end annotation
.limit registers 5
; this: v2 (Lcom/google/tagmanager/SendHitRateLimiter;)
; parameter[0] : v3 (J)
.line 47
	long-to-double	v0,v3
; v0 : double-length , v3 : double-length
	iput-wide	v0,v2,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v0 : double-length , v2 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 48
	return-void	
.end method

.method public tokenAvailable()Z
.limit registers 15
; this: v14 (Lcom/google/tagmanager/SendHitRateLimiter;)
.catch java/lang/Exception from lec9b6 to leca3c using leca38
.var 0 is timeElapsed J from lec9d8 to leca08
.var 4 is tokensDue D from lec9e4 to leca08
.var 2 is timeNow J from lec9be to leca38
	const-wide/high16	v12,16368
; v12 : double-length
.line 60
	iget-object	v7,v14,com/google/tagmanager/SendHitRateLimiter.mTokenLock Ljava/lang/Object;
; v7 : Ljava/lang/Object; , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	monitor-enter	v7
; v7 : Ljava/lang/Object;
lec9b6:
.line 61
	invoke-static	{},java/lang/System/currentTimeMillis	; currentTimeMillis()J
; 
	nop	
	move-result-wide	v2
; v2 : double-length
.line 62
	iget-wide	v8,v14,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	iget	v6,v14,com/google/tagmanager/SendHitRateLimiter.mMaxTokens I
; v6 : single-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	int-to-double	v10,v6
; v10 : double-length , v6 : single-length
	cmpg-double	v6,v8,v10
; v6 : single-length , v8 : double-length , v10 : double-length
	if-gez	v6,leca08
; v6 : single-length
.line 63
	iget-wide	v8,v14,com/google/tagmanager/SendHitRateLimiter.mLastTrackTime J
; v8 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	sub-long	v0,v2,v8
; v0 : double-length , v2 : double-length , v8 : double-length
.line 64
	long-to-double	v8,v0
; v8 : double-length , v0 : double-length
	iget-wide	v10,v14,com/google/tagmanager/SendHitRateLimiter.mMillisecondsPerToken J
; v10 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	long-to-double	v10,v10
; v10 : double-length , v10 : double-length
	div-double	v4,v8,v10
; v4 : double-length , v8 : double-length , v10 : double-length
.line 65
	const-wide/16	v8,0
; v8 : double-length
	cmpl-double	v6,v4,v8
; v6 : single-length , v4 : double-length , v8 : double-length
	if-lez	v6,leca08
; v6 : single-length
.line 66
	iget	v6,v14,com/google/tagmanager/SendHitRateLimiter.mMaxTokens I
; v6 : single-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	int-to-double	v8,v6
; v8 : double-length , v6 : single-length
	iget-wide	v10,v14,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v10 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	add-double/2addr	v10,v4
; v10 : double-length , v4 : double-length
	invoke-static	{v8,v9,v10,v11},java/lang/Math/min	; min(DD)D
; v8 : double-length , v10 : double-length
	move-result-wide	v8
; v8 : double-length
	iput-wide	v8,v14,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
leca08:
.line 69
	iput-wide	v2,v14,com/google/tagmanager/SendHitRateLimiter.mLastTrackTime J
; v2 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 70
	iget-wide	v8,v14,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	cmpl-double	v6,v8,v12
; v6 : single-length , v8 : double-length , v12 : double-length
	if-ltz	v6,leca28
; v6 : single-length
.line 71
	iget-wide	v8,v14,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
	sub-double/2addr	v8,v12
; v8 : double-length , v12 : double-length
	iput-wide	v8,v14,com/google/tagmanager/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/tagmanager/SendHitRateLimiter;
.line 72
	const/4	v6,1
; v6 : single-length
	monitor-exit	v7
; v7 : Ljava/lang/Object;
leca26:
.line 75
	return	v6
; v6 : single-length
leca28:
.line 74
	const-string	v6,"No more tokens available."
; v6 : Ljava/lang/String;
	invoke-static	{v6},com/google/tagmanager/Log/w	; w(Ljava/lang/String;)V
; v6 : Ljava/lang/String;
.line 75
	const/4	v6,0
; v6 : single-length
	monitor-exit	v7
; v7 : Ljava/lang/Object;
	goto	leca26
leca38:
.line 76
	move-exception	v6
; v6 : java/lang/Exception
	monitor-exit	v7
; v7 : Ljava/lang/Object;
leca3c:
	throw	v6
; v6 : java/lang/Exception
.end method


