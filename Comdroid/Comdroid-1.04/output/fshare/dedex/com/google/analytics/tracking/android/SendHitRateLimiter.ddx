.class com/google/analytics/tracking/android/SendHitRateLimiter
.super java/lang/Object
.source SendHitRateLimiter.java
.implements com/google/analytics/tracking/android/RateLimiter

.field private mLastTrackTime J
.field private final mMaxTokens I
.field private final mMillisecondsPerToken J
.field private final mTokenLock Ljava/lang/Object;
.field private mTokens D

.method public <init>()V
.limit registers 4
; this: v3 (Lcom/google/analytics/tracking/android/SendHitRateLimiter;)
.line 39
	const/16	v0,60
; v0 : single-length
	const-wide/16	v1,2000
; v1 : double-length
	invoke-direct	{v3,v0,v1,v2},com/google/analytics/tracking/android/SendHitRateLimiter/<init>	; <init>(IJ)V
; v3 : Lcom/google/analytics/tracking/android/SendHitRateLimiter; , v0 : single-length , v1 : double-length
.line 40
	return-void	
.end method

.method public <init>(IJ)V
.limit registers 6
; this: v2 (Lcom/google/analytics/tracking/android/SendHitRateLimiter;)
; parameter[0] : v3 (I)
; parameter[1] : v4 (J)
.line 28
	invoke-direct	{v2},java/lang/Object/<init>	; <init>()V
; v2 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 20
	new-instance	v0,java/lang/Object
; v0 : Ljava/lang/Object;
	invoke-direct	{v0},java/lang/Object/<init>	; <init>()V
; v0 : Ljava/lang/Object;
	iput-object	v0,v2,com/google/analytics/tracking/android/SendHitRateLimiter.mTokenLock Ljava/lang/Object;
; v0 : Ljava/lang/Object; , v2 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 29
	iput	v3,v2,com/google/analytics/tracking/android/SendHitRateLimiter.mMaxTokens I
; v3 : single-length , v2 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 30
	iget	v0,v2,com/google/analytics/tracking/android/SendHitRateLimiter.mMaxTokens I
; v0 : single-length , v2 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	int-to-double	v0,v0
; v0 : double-length , v0 : double-length
	iput-wide	v0,v2,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v0 : double-length , v2 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 31
	iput-wide	v4,v2,com/google/analytics/tracking/android/SendHitRateLimiter.mMillisecondsPerToken J
; v4 : double-length , v2 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 32
	return-void	
.end method

.method setLastTrackTime(J)V
.annotation buildVisibility Lcom/google/android/gms/common/util/VisibleForTesting;
.end annotation
.limit registers 3
; this: v0 (Lcom/google/analytics/tracking/android/SendHitRateLimiter;)
; parameter[0] : v1 (J)
.line 44
	iput-wide	v1,v0,com/google/analytics/tracking/android/SendHitRateLimiter.mLastTrackTime J
; v1 : double-length , v0 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 45
	return-void	
.end method

.method setTokensAvailable(J)V
.annotation buildVisibility Lcom/google/android/gms/common/util/VisibleForTesting;
.end annotation
.limit registers 5
; this: v2 (Lcom/google/analytics/tracking/android/SendHitRateLimiter;)
; parameter[0] : v3 (J)
.line 49
	long-to-double	v0,v3
; v0 : double-length , v3 : double-length
	iput-wide	v0,v2,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v0 : double-length , v2 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 50
	return-void	
.end method

.method public tokenAvailable()Z
.limit registers 15
; this: v14 (Lcom/google/analytics/tracking/android/SendHitRateLimiter;)
.catch java/lang/Exception from le517a to le5200 using le51fc
.var 0 is timeElapsed J from le519c to le51cc
.var 4 is tokensDue D from le51a8 to le51cc
.var 2 is timeNow J from le5182 to le51fc
	const-wide/high16	v12,16368
; v12 : double-length
.line 62
	iget-object	v7,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mTokenLock Ljava/lang/Object;
; v7 : Ljava/lang/Object; , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	monitor-enter	v7
; v7 : Ljava/lang/Object;
le517a:
.line 63
	invoke-static	{},java/lang/System/currentTimeMillis	; currentTimeMillis()J
; 
	nop	
	move-result-wide	v2
; v2 : double-length
.line 64
	iget-wide	v8,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	iget	v6,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mMaxTokens I
; v6 : single-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	int-to-double	v10,v6
; v10 : double-length , v6 : single-length
	cmpg-double	v6,v8,v10
; v6 : single-length , v8 : double-length , v10 : double-length
	if-gez	v6,le51cc
; v6 : single-length
.line 65
	iget-wide	v8,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mLastTrackTime J
; v8 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	sub-long	v0,v2,v8
; v0 : double-length , v2 : double-length , v8 : double-length
.line 66
	long-to-double	v8,v0
; v8 : double-length , v0 : double-length
	iget-wide	v10,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mMillisecondsPerToken J
; v10 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	long-to-double	v10,v10
; v10 : double-length , v10 : double-length
	div-double	v4,v8,v10
; v4 : double-length , v8 : double-length , v10 : double-length
.line 67
	const-wide/16	v8,0
; v8 : double-length
	cmpl-double	v6,v4,v8
; v6 : single-length , v4 : double-length , v8 : double-length
	if-lez	v6,le51cc
; v6 : single-length
.line 68
	iget	v6,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mMaxTokens I
; v6 : single-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	int-to-double	v8,v6
; v8 : double-length , v6 : single-length
	iget-wide	v10,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v10 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	add-double/2addr	v10,v4
; v10 : double-length , v4 : double-length
	invoke-static	{v8,v9,v10,v11},java/lang/Math/min	; min(DD)D
; v8 : double-length , v10 : double-length
	move-result-wide	v8
; v8 : double-length
	iput-wide	v8,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
le51cc:
.line 71
	iput-wide	v2,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mLastTrackTime J
; v2 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 72
	iget-wide	v8,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	cmpl-double	v6,v8,v12
; v6 : single-length , v8 : double-length , v12 : double-length
	if-ltz	v6,le51ec
; v6 : single-length
.line 73
	iget-wide	v8,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
	sub-double/2addr	v8,v12
; v8 : double-length , v12 : double-length
	iput-wide	v8,v14,com/google/analytics/tracking/android/SendHitRateLimiter.mTokens D
; v8 : double-length , v14 : Lcom/google/analytics/tracking/android/SendHitRateLimiter;
.line 74
	const/4	v6,1
; v6 : single-length
	monitor-exit	v7
; v7 : Ljava/lang/Object;
le51ea:
.line 77
	return	v6
; v6 : single-length
le51ec:
.line 76
	const-string	v6,"Excessive tracking detected.  Tracking call ignored."
; v6 : Ljava/lang/String;
	invoke-static	{v6},com/google/analytics/tracking/android/Log/w	; w(Ljava/lang/String;)V
; v6 : Ljava/lang/String;
.line 77
	const/4	v6,0
; v6 : single-length
	monitor-exit	v7
; v7 : Ljava/lang/Object;
	goto	le51ea
le51fc:
.line 78
	move-exception	v6
; v6 : java/lang/Exception
	monitor-exit	v7
; v7 : Ljava/lang/Object;
le5200:
	throw	v6
; v6 : java/lang/Exception
.end method


