.class public com/google/analytics/tracking/android/ExceptionReporter
.super java/lang/Object
.source ExceptionReporter.java
.implements java/lang/Thread$UncaughtExceptionHandler

.field static final DEFAULT_DESCRIPTION Ljava/lang/String; = "UncaughtException"
.field private mExceptionParser Lcom/google/analytics/tracking/android/ExceptionParser;
.field private final mOriginalHandler Ljava/lang/Thread$UncaughtExceptionHandler;
.field private final mServiceManager Lcom/google/analytics/tracking/android/ServiceManager;
.field private final mTracker Lcom/google/analytics/tracking/android/Tracker;

.method public <init>(Lcom/google/analytics/tracking/android/Tracker;Lcom/google/analytics/tracking/android/ServiceManager;Ljava/lang/Thread$UncaughtExceptionHandler;Landroid/content/Context;)V
.limit registers 7
; this: v2 (Lcom/google/analytics/tracking/android/ExceptionReporter;)
; parameter[0] : v3 (Lcom/google/analytics/tracking/android/Tracker;)
; parameter[1] : v4 (Lcom/google/analytics/tracking/android/ServiceManager;)
; parameter[2] : v5 (Ljava/lang/Thread$UncaughtExceptionHandler;)
; parameter[3] : v6 (Landroid/content/Context;)
.line 48
	invoke-direct	{v2},java/lang/Object/<init>	; <init>()V
; v2 : Lcom/google/analytics/tracking/android/ExceptionReporter;
.line 49
	if-nez	v3,la03b2
; v3 : Lcom/google/analytics/tracking/android/Tracker;
.line 50
	new-instance	v0,java/lang/NullPointerException
; v0 : Ljava/lang/NullPointerException;
	const-string	v1,"tracker cannot be null"
; v1 : Ljava/lang/String;
	invoke-direct	{v0,v1},java/lang/NullPointerException/<init>	; <init>(Ljava/lang/String;)V
; v0 : Ljava/lang/NullPointerException; , v1 : Ljava/lang/String;
	throw	v0
; v0 : Ljava/lang/NullPointerException;
la03b2:
.line 52
	if-nez	v4,la03c6
; v4 : Lcom/google/analytics/tracking/android/ServiceManager;
.line 53
	new-instance	v0,java/lang/NullPointerException
; v0 : Ljava/lang/NullPointerException;
	const-string	v1,"serviceManager cannot be null"
; v1 : Ljava/lang/String;
	invoke-direct	{v0,v1},java/lang/NullPointerException/<init>	; <init>(Ljava/lang/String;)V
; v0 : Ljava/lang/NullPointerException; , v1 : Ljava/lang/String;
	throw	v0
; v0 : Ljava/lang/NullPointerException;
la03c6:
.line 55
	iput-object	v5,v2,com/google/analytics/tracking/android/ExceptionReporter.mOriginalHandler Ljava/lang/Thread$UncaughtExceptionHandler;
; v5 : Ljava/lang/Thread$UncaughtExceptionHandler; , v2 : Lcom/google/analytics/tracking/android/ExceptionReporter;
.line 56
	iput-object	v3,v2,com/google/analytics/tracking/android/ExceptionReporter.mTracker Lcom/google/analytics/tracking/android/Tracker;
; v3 : Lcom/google/analytics/tracking/android/Tracker; , v2 : Lcom/google/analytics/tracking/android/ExceptionReporter;
.line 57
	iput-object	v4,v2,com/google/analytics/tracking/android/ExceptionReporter.mServiceManager Lcom/google/analytics/tracking/android/ServiceManager;
; v4 : Lcom/google/analytics/tracking/android/ServiceManager; , v2 : Lcom/google/analytics/tracking/android/ExceptionReporter;
.line 58
	new-instance	v0,com/google/analytics/tracking/android/StandardExceptionParser
; v0 : Lcom/google/analytics/tracking/android/StandardExceptionParser;
	new-instance	v1,java/util/ArrayList
; v1 : Ljava/util/ArrayList;
	invoke-direct	{v1},java/util/ArrayList/<init>	; <init>()V
; v1 : Ljava/util/ArrayList;
	invoke-direct	{v0,v6,v1},com/google/analytics/tracking/android/StandardExceptionParser/<init>	; <init>(Landroid/content/Context;Ljava/util/Collection;)V
; v0 : Lcom/google/analytics/tracking/android/StandardExceptionParser; , v6 : Landroid/content/Context; , v1 : Ljava/util/ArrayList;
	iput-object	v0,v2,com/google/analytics/tracking/android/ExceptionReporter.mExceptionParser Lcom/google/analytics/tracking/android/ExceptionParser;
; v0 : Lcom/google/analytics/tracking/android/StandardExceptionParser; , v2 : Lcom/google/analytics/tracking/android/ExceptionReporter;
.line 59
	new-instance	v0,java/lang/StringBuilder
; v0 : Ljava/lang/StringBuilder;
	invoke-direct	{v0},java/lang/StringBuilder/<init>	; <init>()V
; v0 : Ljava/lang/StringBuilder;
	const-string	v1,"ExceptionReporter created, original handler is "
; v1 : Ljava/lang/String;
	invoke-virtual	{v0,v1},java/lang/StringBuilder/append	; append(Ljava/lang/String;)Ljava/lang/StringBuilder;
; v0 : Ljava/lang/StringBuilder; , v1 : Ljava/lang/String;
	move-result-object	v1
; v1 : Ljava/lang/StringBuilder;
	if-nez	v5,la0420
; v5 : Ljava/lang/Thread$UncaughtExceptionHandler;
	const-string	v0,"null"
; v0 : Ljava/lang/String;
la0408:
	invoke-virtual	{v1,v0},java/lang/StringBuilder/append	; append(Ljava/lang/String;)Ljava/lang/StringBuilder;
; v1 : Ljava/lang/StringBuilder; , v0 : Ljava/lang/String;
	move-result-object	v0
; v0 : Ljava/lang/StringBuilder;
	invoke-virtual	{v0},java/lang/StringBuilder/toString	; toString()Ljava/lang/String;
; v0 : Ljava/lang/StringBuilder;
	move-result-object	v0
; v0 : Ljava/lang/String;
	invoke-static	{v0},com/google/analytics/tracking/android/Log/v	; v(Ljava/lang/String;)V
; v0 : Ljava/lang/String;
.line 61
	return-void	
la0420:
.line 59
	invoke-virtual	{v5},java/lang/Object/getClass	; getClass()Ljava/lang/Class;
; v5 : Ljava/lang/Thread$UncaughtExceptionHandler;
	move-result-object	v0
; v0 : Ljava/lang/Class;
	invoke-virtual	{v0},java/lang/Class/getName	; getName()Ljava/lang/String;
; v0 : Ljava/lang/Class;
	move-result-object	v0
; v0 : Ljava/lang/String;
	goto	la0408
.end method

.method public getExceptionParser()Lcom/google/analytics/tracking/android/ExceptionParser;
.limit registers 2
; this: v1 (Lcom/google/analytics/tracking/android/ExceptionReporter;)
.line 64
	iget-object	v0,v1,com/google/analytics/tracking/android/ExceptionReporter.mExceptionParser Lcom/google/analytics/tracking/android/ExceptionParser;
; v0 : Lcom/google/analytics/tracking/android/ExceptionParser; , v1 : Lcom/google/analytics/tracking/android/ExceptionReporter;
	return-object	v0
; v0 : Lcom/google/analytics/tracking/android/ExceptionParser;
.end method

.method public setExceptionParser(Lcom/google/analytics/tracking/android/ExceptionParser;)V
.limit registers 2
; this: v0 (Lcom/google/analytics/tracking/android/ExceptionReporter;)
; parameter[0] : v1 (Lcom/google/analytics/tracking/android/ExceptionParser;)
.line 68
	iput-object	v1,v0,com/google/analytics/tracking/android/ExceptionReporter.mExceptionParser Lcom/google/analytics/tracking/android/ExceptionParser;
; v1 : Lcom/google/analytics/tracking/android/ExceptionParser; , v0 : Lcom/google/analytics/tracking/android/ExceptionReporter;
.line 69
	return-void	
.end method

.method public uncaughtException(Ljava/lang/Thread;Ljava/lang/Throwable;)V
.limit registers 7
; this: v4 (Lcom/google/analytics/tracking/android/ExceptionReporter;)
; parameter[0] : v5 (Ljava/lang/Thread;)
; parameter[1] : v6 (Ljava/lang/Throwable;)
.var 1 is threadName Ljava/lang/String; from la048c to la0498
.line 74
	const-string	v0,"UncaughtException"
; v0 : Ljava/lang/String;
.line 75
	iget-object	v2,v4,com/google/analytics/tracking/android/ExceptionReporter.mExceptionParser Lcom/google/analytics/tracking/android/ExceptionParser;
; v2 : Lcom/google/analytics/tracking/android/ExceptionParser; , v4 : Lcom/google/analytics/tracking/android/ExceptionReporter;
	if-eqz	v2,la0498
; v2 : Lcom/google/analytics/tracking/android/ExceptionParser;
.line 76
	if-eqz	v5,la0510
; v5 : Ljava/lang/Thread;
	invoke-virtual	{v5},java/lang/Thread/getName	; getName()Ljava/lang/String;
; v5 : Ljava/lang/Thread;
	move-result-object	v1
; v1 : Ljava/lang/String;
la048c:
.line 77
	iget-object	v2,v4,com/google/analytics/tracking/android/ExceptionReporter.mExceptionParser Lcom/google/analytics/tracking/android/ExceptionParser;
; v2 : Lcom/google/analytics/tracking/android/ExceptionParser; , v4 : Lcom/google/analytics/tracking/android/ExceptionReporter;
	invoke-interface	{v2,v1,v6},com/google/analytics/tracking/android/ExceptionParser/getDescription	; getDescription(Ljava/lang/String;Ljava/lang/Throwable;)Ljava/lang/String;
; v2 : Lcom/google/analytics/tracking/android/ExceptionParser; , v1 : single-length , v6 : Ljava/lang/Throwable;
	move-result-object	v0
; v0 : Ljava/lang/String;
la0498:
.line 79
	new-instance	v2,java/lang/StringBuilder
; v2 : Ljava/lang/StringBuilder;
	invoke-direct	{v2},java/lang/StringBuilder/<init>	; <init>()V
; v2 : Ljava/lang/StringBuilder;
	const-string	v3,"Tracking Exception: "
; v3 : Ljava/lang/String;
	invoke-virtual	{v2,v3},java/lang/StringBuilder/append	; append(Ljava/lang/String;)Ljava/lang/StringBuilder;
; v2 : Ljava/lang/StringBuilder; , v3 : Ljava/lang/String;
	move-result-object	v2
; v2 : Ljava/lang/StringBuilder;
	invoke-virtual	{v2,v0},java/lang/StringBuilder/append	; append(Ljava/lang/String;)Ljava/lang/StringBuilder;
; v2 : Ljava/lang/StringBuilder; , v0 : Ljava/lang/String;
	move-result-object	v2
; v2 : Ljava/lang/StringBuilder;
	invoke-virtual	{v2},java/lang/StringBuilder/toString	; toString()Ljava/lang/String;
; v2 : Ljava/lang/StringBuilder;
	move-result-object	v2
; v2 : Ljava/lang/String;
	invoke-static	{v2},com/google/analytics/tracking/android/Log/v	; v(Ljava/lang/String;)V
; v2 : Ljava/lang/String;
.line 80
	iget-object	v2,v4,com/google/analytics/tracking/android/ExceptionReporter.mTracker Lcom/google/analytics/tracking/android/Tracker;
; v2 : Lcom/google/analytics/tracking/android/Tracker; , v4 : Lcom/google/analytics/tracking/android/ExceptionReporter;
	const/4	v3,1
; v3 : single-length
	invoke-static	{v3},java/lang/Boolean/valueOf	; valueOf(Z)Ljava/lang/Boolean;
; v3 : single-length
	move-result-object	v3
; v3 : Ljava/lang/Boolean;
	invoke-static	{v0,v3},com/google/analytics/tracking/android/MapBuilder/createException	; createException(Ljava/lang/String;Ljava/lang/Boolean;)Lcom/google/analytics/tracking/android/MapBuilder;
; v0 : Ljava/lang/String; , v3 : Ljava/lang/Boolean;
	move-result-object	v3
; v3 : Lcom/google/analytics/tracking/android/MapBuilder;
	invoke-virtual	{v3},com/google/analytics/tracking/android/MapBuilder/build	; build()Ljava/util/Map;
; v3 : Lcom/google/analytics/tracking/android/MapBuilder;
	move-result-object	v3
; v3 : Ljava/util/Map;
	invoke-virtual	{v2,v3},com/google/analytics/tracking/android/Tracker/send	; send(Ljava/util/Map;)V
; v2 : Lcom/google/analytics/tracking/android/Tracker; , v3 : Ljava/util/Map;
.line 82
	iget-object	v2,v4,com/google/analytics/tracking/android/ExceptionReporter.mServiceManager Lcom/google/analytics/tracking/android/ServiceManager;
; v2 : Lcom/google/analytics/tracking/android/ServiceManager; , v4 : Lcom/google/analytics/tracking/android/ExceptionReporter;
	invoke-virtual	{v2},com/google/analytics/tracking/android/ServiceManager/dispatchLocalHits	; dispatchLocalHits()V
; v2 : Lcom/google/analytics/tracking/android/ServiceManager;
.line 83
	iget-object	v2,v4,com/google/analytics/tracking/android/ExceptionReporter.mOriginalHandler Ljava/lang/Thread$UncaughtExceptionHandler;
; v2 : Ljava/lang/Thread$UncaughtExceptionHandler; , v4 : Lcom/google/analytics/tracking/android/ExceptionReporter;
	if-eqz	v2,la050e
; v2 : Ljava/lang/Thread$UncaughtExceptionHandler;
.line 84
	const-string	v2,"Passing exception to original handler."
; v2 : Ljava/lang/String;
	invoke-static	{v2},com/google/analytics/tracking/android/Log/v	; v(Ljava/lang/String;)V
; v2 : Ljava/lang/String;
.line 85
	iget-object	v2,v4,com/google/analytics/tracking/android/ExceptionReporter.mOriginalHandler Ljava/lang/Thread$UncaughtExceptionHandler;
; v2 : Ljava/lang/Thread$UncaughtExceptionHandler; , v4 : Lcom/google/analytics/tracking/android/ExceptionReporter;
	invoke-interface	{v2,v5,v6},java/lang/Thread$UncaughtExceptionHandler/uncaughtException	; uncaughtException(Ljava/lang/Thread;Ljava/lang/Throwable;)V
; v2 : Ljava/lang/Thread$UncaughtExceptionHandler; , v5 : Ljava/lang/Thread; , v6 : Ljava/lang/Throwable;
la050e:
.line 87
	return-void	
la0510:
.line 76
	const/4	v1,0
; v1 : single-length
	goto	la048c
.end method


