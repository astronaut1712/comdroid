.class public abstract com/squareup/okhttp/internal/FaultRecoveringOutputStream
.super com/squareup/okhttp/internal/AbstractOutputStream
.source FaultRecoveringOutputStream.java

.field private final maxReplayBufferLength I
.field private out Ljava/io/OutputStream;
.field private replayBuffer Ljava/io/ByteArrayOutputStream;

.method public <init>(ILjava/io/OutputStream;)V
.limit registers 4
; this: v1 (Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;)
; parameter[0] : v2 (I)
; parameter[1] : v3 (Ljava/io/OutputStream;)
.line 47
	invoke-direct	{v1},com/squareup/okhttp/internal/AbstractOutputStream/<init>	; <init>()V
; v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
.line 48
	if-gez	v2,leeeae
; v2 : single-length
	new-instance	v0,java/lang/IllegalArgumentException
; v0 : Ljava/lang/IllegalArgumentException;
	invoke-direct	{v0},java/lang/IllegalArgumentException/<init>	; <init>()V
; v0 : Ljava/lang/IllegalArgumentException;
	throw	v0
; v0 : Ljava/lang/IllegalArgumentException;
leeeae:
.line 49
	iput	v2,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.maxReplayBufferLength I
; v2 : single-length , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
.line 50
	new-instance	v0,java/io/ByteArrayOutputStream
; v0 : Ljava/io/ByteArrayOutputStream;
	invoke-direct	{v0,v2},java/io/ByteArrayOutputStream/<init>	; <init>(I)V
; v0 : Ljava/io/ByteArrayOutputStream; , v2 : single-length
	iput-object	v0,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v0 : Ljava/io/ByteArrayOutputStream; , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
.line 51
	iput-object	v3,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.out Ljava/io/OutputStream;
; v3 : Ljava/io/OutputStream; , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
.line 52
	return-void	
.end method

.method private recover(Ljava/io/IOException;)Z
.limit registers 6
; this: v4 (Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;)
; parameter[0] : v5 (Ljava/io/IOException;)
.catch java/io/IOException from leeef0 to leef02 using leeee4
.var 0 is replacementStream Ljava/io/OutputStream; from leeee4 to leeeee
.var 1 is replacementStreamFailure Ljava/io/IOException; from leeee6 to leeeee
	const/4	v2,0
; v2 : single-length
.line 112
	iget-object	v3,v4,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v3 : Ljava/io/ByteArrayOutputStream; , v4 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-nez	v3,leeeee
; v3 : Ljava/io/ByteArrayOutputStream;
leeee2:
.line 124
	return	v2
; v2 : single-length
leeee4:
.line 125
	move-exception	v1
; v1 : java/io/IOException
.line 127
	invoke-static	{v0},com/squareup/okhttp/internal/Util/closeQuietly	; closeQuietly(Ljava/io/Closeable;)V
; v0 : Ljava/io/OutputStream;
.line 128
	move-object	v5,v1
; v5 : java/io/IOException , v1 : java/io/IOException
leeeee:
.line 117
	const/4	v0,0
; v0 : single-length
leeef0:
.line 119
	invoke-virtual	{v4,v5},com/squareup/okhttp/internal/FaultRecoveringOutputStream/replacementStream	; replacementStream(Ljava/io/IOException;)Ljava/io/OutputStream;
; v4 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream; , v5 : java/io/IOException
	move-result-object	v0
; v0 : Ljava/io/OutputStream;
.line 120
	if-eqz	v0,leeee2
; v0 : Ljava/io/OutputStream;
.line 123
	invoke-virtual	{v4,v0},com/squareup/okhttp/internal/FaultRecoveringOutputStream/replaceStream	; replaceStream(Ljava/io/OutputStream;)V
; v4 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream; , v0 : Ljava/io/OutputStream;
leef02:
.line 124
	const/4	v2,1
; v2 : single-length
	goto	leeee2
.end method

.method public final close()V
.throws Ljava/io/IOException;
.limit registers 3
; this: v2 (Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;)
.catch java/io/IOException from leef32 to leef42 using leef44
.line 93
	iget-boolean	v1,v2,com/squareup/okhttp/internal/FaultRecoveringOutputStream.closed Z
; v1 : single-length , v2 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-eqz	v1,leef32
; v1 : single-length
leef30:
.line 100
	return-void	
leef32:
.line 98
	iget-object	v1,v2,com/squareup/okhttp/internal/FaultRecoveringOutputStream.out Ljava/io/OutputStream;
; v1 : Ljava/io/OutputStream; , v2 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	invoke-virtual	{v1},java/io/OutputStream/close	; close()V
; v1 : Ljava/io/OutputStream;
.line 99
	const/4	v1,1
; v1 : single-length
	iput-boolean	v1,v2,com/squareup/okhttp/internal/FaultRecoveringOutputStream.closed Z
; v1 : single-length , v2 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
leef42:
	goto	leef30
leef44:
.line 101
	move-exception	v0
; v0 : java/io/IOException
.line 102
	invoke-direct	{v2,v0},com/squareup/okhttp/internal/FaultRecoveringOutputStream/recover	; recover(Ljava/io/IOException;)Z
; v2 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream; , v0 : java/io/IOException
	move-result	v1
; v1 : single-length
	if-nez	v1,leef32
; v1 : single-length
	throw	v0
; v0 : java/io/IOException
.end method

.method public final flush()V
.throws Ljava/io/IOException;
.limit registers 3
; this: v2 (Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;)
.catch java/io/IOException from leef7e to leef88 using leef8a
.line 79
	iget-boolean	v1,v2,com/squareup/okhttp/internal/FaultRecoveringOutputStream.closed Z
; v1 : single-length , v2 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-eqz	v1,leef7e
; v1 : single-length
leef7c:
.line 85
	return-void	
leef7e:
.line 84
	iget-object	v1,v2,com/squareup/okhttp/internal/FaultRecoveringOutputStream.out Ljava/io/OutputStream;
; v1 : Ljava/io/OutputStream; , v2 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	invoke-virtual	{v1},java/io/OutputStream/flush	; flush()V
; v1 : Ljava/io/OutputStream;
leef88:
	goto	leef7c
leef8a:
.line 86
	move-exception	v0
; v0 : java/io/IOException
.line 87
	invoke-direct	{v2,v0},com/squareup/okhttp/internal/FaultRecoveringOutputStream/recover	; recover(Ljava/io/IOException;)Z
; v2 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream; , v0 : java/io/IOException
	move-result	v1
; v1 : single-length
	if-nez	v1,leef7e
; v1 : single-length
	throw	v0
; v0 : java/io/IOException
.end method

.method public isRecoverable()Z
.limit registers 2
; this: v1 (Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;)
.line 137
	iget-object	v0,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v0 : Ljava/io/ByteArrayOutputStream; , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-eqz	v0,leefc8
; v0 : Ljava/io/ByteArrayOutputStream;
	const/4	v0,1
; v0 : single-length
leefc6:
	return	v0
; v0 : single-length
leefc8:
	const/4	v0,0
; v0 : single-length
	goto	leefc6
.end method

.method public final replaceStream(Ljava/io/OutputStream;)V
.throws Ljava/io/IOException;
.limit registers 3
; this: v1 (Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;)
; parameter[0] : v2 (Ljava/io/OutputStream;)
.line 145
	invoke-virtual	{v1},com/squareup/okhttp/internal/FaultRecoveringOutputStream/isRecoverable	; isRecoverable()Z
; v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	move-result	v0
; v0 : single-length
	if-nez	v0,leeff4
; v0 : single-length
.line 146
	new-instance	v0,java/lang/IllegalStateException
; v0 : Ljava/lang/IllegalStateException;
	invoke-direct	{v0},java/lang/IllegalStateException/<init>	; <init>()V
; v0 : Ljava/lang/IllegalStateException;
	throw	v0
; v0 : Ljava/lang/IllegalStateException;
leeff4:
.line 148
	iget-object	v0,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.out Ljava/io/OutputStream;
; v0 : Ljava/io/OutputStream; , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-ne	v0,v2,leeffe
; v0 : Ljava/io/OutputStream; , v2 : Ljava/io/OutputStream;
leeffc:
.line 154
	return-void	
leeffe:
.line 151
	iget-object	v0,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v0 : Ljava/io/ByteArrayOutputStream; , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	invoke-virtual	{v0,v2},java/io/ByteArrayOutputStream/writeTo	; writeTo(Ljava/io/OutputStream;)V
; v0 : Ljava/io/ByteArrayOutputStream; , v2 : Ljava/io/OutputStream;
.line 152
	iget-object	v0,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.out Ljava/io/OutputStream;
; v0 : Ljava/io/OutputStream; , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	invoke-static	{v0},com/squareup/okhttp/internal/Util/closeQuietly	; closeQuietly(Ljava/io/Closeable;)V
; v0 : Ljava/io/OutputStream;
.line 153
	iput-object	v2,v1,com/squareup/okhttp/internal/FaultRecoveringOutputStream.out Ljava/io/OutputStream;
; v2 : Ljava/io/OutputStream; , v1 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	goto	leeffc
.end method

.method protected abstract replacementStream(Ljava/io/IOException;)Ljava/io/OutputStream;
.throws Ljava/io/IOException;
.end method

.method public final write([BII)V
.throws Ljava/io/IOException;
.limit registers 7
; this: v3 (Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;)
; parameter[0] : v4 ([B)
; parameter[1] : v5 (I)
; parameter[2] : v6 (I)
.catch java/io/IOException from lef048 to lef082 using lef084
.line 55
	iget-boolean	v1,v3,com/squareup/okhttp/internal/FaultRecoveringOutputStream.closed Z
; v1 : single-length , v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-eqz	v1,lef040
; v1 : single-length
	new-instance	v1,java/io/IOException
; v1 : Ljava/io/IOException;
	const-string	v2,"stream closed"
; v2 : Ljava/lang/String;
	invoke-direct	{v1,v2},java/io/IOException/<init>	; <init>(Ljava/lang/String;)V
; v1 : Ljava/io/IOException; , v2 : Ljava/lang/String;
	throw	v1
; v1 : Ljava/io/IOException;
lef040:
.line 56
	array-length	v1,v4
; v1 : single-length , v4 : [B
	invoke-static	{v1,v5,v6},com/squareup/okhttp/internal/Util/checkOffsetAndCount	; checkOffsetAndCount(III)V
; v1 : single-length , v5 : single-length , v6 : single-length
lef048:
.line 60
	iget-object	v1,v3,com/squareup/okhttp/internal/FaultRecoveringOutputStream.out Ljava/io/OutputStream;
; v1 : Ljava/io/OutputStream; , v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	invoke-virtual	{v1,v4,v5,v6},java/io/OutputStream/write	; write([BII)V
; v1 : Ljava/io/OutputStream; , v4 : [B , v5 : single-length , v6 : single-length
.line 62
	iget-object	v1,v3,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v1 : Ljava/io/ByteArrayOutputStream; , v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-eqz	v1,lef076
; v1 : Ljava/io/ByteArrayOutputStream;
.line 63
	iget-object	v1,v3,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v1 : Ljava/io/ByteArrayOutputStream; , v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	invoke-virtual	{v1},java/io/ByteArrayOutputStream/size	; size()I
; v1 : Ljava/io/ByteArrayOutputStream;
	move-result	v1
; v1 : single-length
	add-int/2addr	v1,v6
; v1 : single-length , v6 : single-length
	iget	v2,v3,com/squareup/okhttp/internal/FaultRecoveringOutputStream.maxReplayBufferLength I
; v2 : single-length , v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	if-le	v1,v2,lef078
; v1 : single-length , v2 : single-length
.line 65
	const/4	v1,0
; v1 : single-length
	iput-object	v1,v3,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v1 : single-length , v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
lef076:
.line 71
	return-void	
lef078:
.line 68
	iget-object	v1,v3,com/squareup/okhttp/internal/FaultRecoveringOutputStream.replayBuffer Ljava/io/ByteArrayOutputStream;
; v1 : Ljava/io/ByteArrayOutputStream; , v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream;
	invoke-virtual	{v1,v4,v5,v6},java/io/ByteArrayOutputStream/write	; write([BII)V
; v1 : Ljava/io/ByteArrayOutputStream; , v4 : [B , v5 : single-length , v6 : single-length
lef082:
	goto	lef076
lef084:
.line 72
	move-exception	v0
; v0 : java/io/IOException
.line 73
	invoke-direct	{v3,v0},com/squareup/okhttp/internal/FaultRecoveringOutputStream/recover	; recover(Ljava/io/IOException;)Z
; v3 : Lcom/squareup/okhttp/internal/FaultRecoveringOutputStream; , v0 : java/io/IOException
	move-result	v1
; v1 : single-length
	if-nez	v1,lef048
; v1 : single-length
	throw	v0
; v0 : java/io/IOException
.end method


