.class public com/fsharemobile/service/ConnectionReceiver
.super android/content/BroadcastReceiver
.source ConnectionReceiver.java

.field constants Lcom/fsharemobile/utils/Constants;
.field private fclient Lcom/fsharemobile/client/FClient;
.field private userProxy Lcom/fsharemobile/client/UserProxy;

.method public <init>()V
.limit registers 2
; this: v1 (Lcom/fsharemobile/service/ConnectionReceiver;)
.line 21
	invoke-direct	{v1},android/content/BroadcastReceiver/<init>	; <init>()V
; v1 : Lcom/fsharemobile/service/ConnectionReceiver;
.line 22
	const/4	v0,0
; v0 : single-length
	iput-object	v0,v1,com/fsharemobile/service/ConnectionReceiver.fclient Lcom/fsharemobile/client/FClient;
; v0 : single-length , v1 : Lcom/fsharemobile/service/ConnectionReceiver;
.line 21
	return-void	
.end method

.method static access$0(Lcom/fsharemobile/service/ConnectionReceiver;)Lcom/fsharemobile/client/FClient;
.limit registers 2
; parameter[0] : v1 (Lcom/fsharemobile/service/ConnectionReceiver;)
.line 22
	iget-object	v0,v1,com/fsharemobile/service/ConnectionReceiver.fclient Lcom/fsharemobile/client/FClient;
; v0 : Lcom/fsharemobile/client/FClient; , v1 : Lcom/fsharemobile/service/ConnectionReceiver;
	return-object	v0
; v0 : Lcom/fsharemobile/client/FClient;
.end method

.method public onReceive(Landroid/content/Context;Landroid/content/Intent;)V
.limit registers 13
; this: v10 (Lcom/fsharemobile/service/ConnectionReceiver;)
; parameter[0] : v11 (Landroid/content/Context;)
; parameter[1] : v12 (Landroid/content/Intent;)
.catch java/lang/Exception from l9c31e to l9c342 using l9c344
.var 1 is e Ljava/lang/Exception; from l9c346 to l9c34e
.line 30
	invoke-static	{},com/fsharemobile/model/Share/getInstance	; getInstance()Lcom/fsharemobile/model/Share;
; 
	nop	
	move-result-object	v5
; v5 : Lcom/fsharemobile/model/Share;
.line 31
	invoke-virtual	{v5},com/fsharemobile/model/Share/getFclient	; getFclient()Lcom/fsharemobile/client/FClient;
; v5 : Lcom/fsharemobile/model/Share;
	move-result-object	v6
; v6 : Lcom/fsharemobile/client/FClient;
	iput-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.fclient Lcom/fsharemobile/client/FClient;
; v6 : Lcom/fsharemobile/client/FClient; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
.line 32
	iget-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.fclient Lcom/fsharemobile/client/FClient;
; v6 : Lcom/fsharemobile/client/FClient; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
	invoke-virtual	{v6},com/fsharemobile/client/FClient/getUserProxy	; getUserProxy()Lcom/fsharemobile/client/UserProxy;
; v6 : Lcom/fsharemobile/client/FClient;
	move-result-object	v6
; v6 : Lcom/fsharemobile/client/UserProxy;
	iput-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.userProxy Lcom/fsharemobile/client/UserProxy;
; v6 : Lcom/fsharemobile/client/UserProxy; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
.line 33
	move-object	v2,v11
; v2 : Landroid/content/Context; , v11 : Landroid/content/Context;
.line 34
	new-instance	v6,com/fsharemobile/utils/Constants
; v6 : Lcom/fsharemobile/utils/Constants;
	invoke-direct	{v6,v2},com/fsharemobile/utils/Constants/<init>	; <init>(Landroid/content/Context;)V
; v6 : Lcom/fsharemobile/utils/Constants; , v2 : Landroid/content/Context;
	iput-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.constants Lcom/fsharemobile/utils/Constants;
; v6 : Lcom/fsharemobile/utils/Constants; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
.line 35
	new-instance	v3,com/fsharemobile/model/LocalUser
; v3 : Lcom/fsharemobile/model/LocalUser;
	invoke-direct	{v3},com/fsharemobile/model/LocalUser/<init>	; <init>()V
; v3 : Lcom/fsharemobile/model/LocalUser;
.line 37
	const-string	v6,"connectivity"
; v6 : Ljava/lang/String;
	invoke-virtual	{v11,v6},android/content/Context/getSystemService	; getSystemService(Ljava/lang/String;)Ljava/lang/Object;
; v11 : Landroid/content/Context; , v6 : Ljava/lang/String;
	move-result-object	v0
; v0 : Ljava/lang/Object;
.line 36
	check-cast	v0,android/net/ConnectivityManager
; v0 : Landroid/net/ConnectivityManager;
.line 38
	invoke-virtual	{v0},android/net/ConnectivityManager/getActiveNetworkInfo	; getActiveNetworkInfo()Landroid/net/NetworkInfo;
; v0 : Landroid/net/ConnectivityManager;
	move-result-object	v4
; v4 : Landroid/net/NetworkInfo;
.line 39
	invoke-virtual	{v12},android/content/Intent/getAction	; getAction()Ljava/lang/String;
; v12 : Landroid/content/Intent;
	move-result-object	v6
; v6 : Ljava/lang/String;
	const-string	v7,"android.net.conn.CONNECTIVITY_CHANGE"
; v7 : Ljava/lang/String;
	invoke-virtual	{v6,v7},java/lang/String/equals	; equals(Ljava/lang/Object;)Z
; v6 : Ljava/lang/String; , v7 : Ljava/lang/String;
	move-result	v6
; v6 : single-length
	if-nez	v6,l9c2ba
; v6 : single-length
.line 40
	invoke-virtual	{v12},android/content/Intent/getAction	; getAction()Ljava/lang/String;
; v12 : Landroid/content/Intent;
	move-result-object	v6
; v6 : Ljava/lang/String;
.line 41
	const-string	v7,"com.fsharemobile.service.Relogin"
; v7 : Ljava/lang/String;
	invoke-virtual	{v6,v7},java/lang/String/equals	; equals(Ljava/lang/Object;)Z
; v6 : Ljava/lang/String; , v7 : Ljava/lang/String;
	move-result	v6
; v6 : single-length
	if-eqz	v6,l9c342
; v6 : single-length
l9c2ba:
.line 43
	if-eqz	v4,l9c34e
; v4 : Landroid/net/NetworkInfo;
	invoke-virtual	{v4},android/net/NetworkInfo/isAvailable	; isAvailable()Z
; v4 : Landroid/net/NetworkInfo;
	move-result	v6
; v6 : single-length
	if-eqz	v6,l9c34e
; v6 : single-length
	invoke-virtual	{v4},android/net/NetworkInfo/isConnected	; isConnected()Z
; v4 : Landroid/net/NetworkInfo;
	move-result	v6
; v6 : single-length
	if-eqz	v6,l9c34e
; v6 : single-length
.line 44
	const-string	v6,"NET"
; v6 : Ljava/lang/String;
	const-string	v7,"connected"
; v7 : Ljava/lang/String;
	invoke-static	{v6,v7},android/util/Log/e	; e(Ljava/lang/String;Ljava/lang/String;)I
; v6 : Ljava/lang/String; , v7 : Ljava/lang/String;
.line 45
	iget-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.constants Lcom/fsharemobile/utils/Constants;
; v6 : Lcom/fsharemobile/utils/Constants; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
	invoke-virtual	{v6},com/fsharemobile/utils/Constants/restoringPreferences	; restoringPreferences()Lcom/fsharemobile/model/LocalUser;
; v6 : Lcom/fsharemobile/utils/Constants;
	move-result-object	v3
; v3 : Lcom/fsharemobile/model/LocalUser;
.line 47
	iget-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.fclient Lcom/fsharemobile/client/FClient;
; v6 : Lcom/fsharemobile/client/FClient; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
	const-string	v7,""
; v7 : Ljava/lang/String;
	invoke-virtual	{v6,v7},com/fsharemobile/client/FClient/setSessionid	; setSessionid(Ljava/lang/String;)V
; v6 : Lcom/fsharemobile/client/FClient; , v7 : Ljava/lang/String;
.line 48
	iget-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.fclient Lcom/fsharemobile/client/FClient;
; v6 : Lcom/fsharemobile/client/FClient; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
	const-string	v7,""
; v7 : Ljava/lang/String;
	invoke-virtual	{v6,v7},com/fsharemobile/client/FClient/setToken	; setToken(Ljava/lang/String;)V
; v6 : Lcom/fsharemobile/client/FClient; , v7 : Ljava/lang/String;
.line 49
	iget-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.fclient Lcom/fsharemobile/client/FClient;
; v6 : Lcom/fsharemobile/client/FClient; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
	invoke-virtual	{v6},com/fsharemobile/client/FClient/getCookies	; getCookies()Ljava/util/List;
; v6 : Lcom/fsharemobile/client/FClient;
	move-result-object	v6
; v6 : Ljava/util/List;
	invoke-interface	{v6},java/util/List/clear	; clear()V
; v6 : Ljava/util/List;
l9c31e:
.line 52
	iget-object	v6,v10,com/fsharemobile/service/ConnectionReceiver.userProxy Lcom/fsharemobile/client/UserProxy;
; v6 : Lcom/fsharemobile/client/UserProxy; , v10 : Lcom/fsharemobile/service/ConnectionReceiver;
	invoke-virtual	{v3},com/fsharemobile/model/LocalUser/getEmail	; getEmail()Ljava/lang/String;
; v3 : Lcom/fsharemobile/model/LocalUser;
	move-result-object	v7
; v7 : Ljava/lang/String;
	invoke-virtual	{v3},com/fsharemobile/model/LocalUser/getPass	; getPass()Ljava/lang/String;
; v3 : Lcom/fsharemobile/model/LocalUser;
	move-result-object	v8
; v8 : Ljava/lang/String;
.line 53
	new-instance	v9,com/fsharemobile/service/ConnectionReceiver$1
; v9 : Lcom/fsharemobile/service/ConnectionReceiver$1;
	invoke-direct	{v9,v10,v2},com/fsharemobile/service/ConnectionReceiver$1/<init>	; <init>(Lcom/fsharemobile/service/ConnectionReceiver;Landroid/content/Context;)V
; v9 : Lcom/fsharemobile/service/ConnectionReceiver$1; , v10 : Lcom/fsharemobile/service/ConnectionReceiver; , v2 : Landroid/content/Context;
.line 52
	invoke-virtual	{v6,v7,v8,v9},com/fsharemobile/client/UserProxy/login	; login(Ljava/lang/String;Ljava/lang/String;Lcom/fsharemobile/client/UserProxy$OnLoginCompleted;)V
; v6 : Lcom/fsharemobile/client/UserProxy; , v7 : Ljava/lang/String; , v8 : Ljava/lang/String; , v9 : Lcom/fsharemobile/service/ConnectionReceiver$1;
l9c342:
.line 101
	return-void	
l9c344:
.line 93
	move-exception	v1
; v1 : java/lang/Exception
.line 95
	invoke-virtual	{v1},java/lang/Exception/printStackTrace	; printStackTrace()V
; v1 : java/lang/Exception
	goto	l9c342
l9c34e:
.line 98
	const-string	v6,"NET"
; v6 : Ljava/lang/String;
	const-string	v7,"no wifi"
; v7 : Ljava/lang/String;
	invoke-static	{v6,v7},android/util/Log/e	; e(Ljava/lang/String;Ljava/lang/String;)I
; v6 : Ljava/lang/String; , v7 : Ljava/lang/String;
	goto	l9c342
.end method


